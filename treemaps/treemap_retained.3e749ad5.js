var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},l={},n=e.parcelRequire94c2;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in l){var n=l[e];delete l[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){l[e]=t},e.parcelRequire94c2=n);var a=n("ld1g2");function r(e){return i(e).length-1}const o=e=>e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");function i(e){let t={")":"(","]":"[",">":"<","}":"{"},l=[...e],n=[],a=[],r="";return l.forEach(e=>{if("."===e){0===n.length?(a.push(r),r=""):r=r.concat(".");return}if("("===e||"{"===e||"<"==e||"["==e)n.push(e);else if(")"===e||"}"===e||">"===e||"]"===e){for(;n.length>1&&n[n.length-1]!=t[e];)n.pop();n.pop()}r=r.concat(e)}),r.length>0&&a.push(r),a}var a=n("ld1g2");console.log(a);const d=["#e06ec1","#9E999D","#824e6c","#347EB4","#08ACB6","#91BB91","#BCD32F","#75EDB8","#a4d08e","#AD4FE8","#D5AB61","#bb9367","#F6A1F9","#87ABBB","#91647c","#56B870","#FDAB41","#64624F"];var c=n("16ejo"),s=n("bOTk3"),p=n("b8ciI"),a=n("ld1g2");const u=new Map(Object.entries(s.kotlinRetainedSize).map(e=>[e[0],e[1].size])),g=new Map(Object.entries(p.kotlinDeclarationsSize).map(e=>[e[0],e[1].size])),h=.97*window.innerHeight,f=.8*window.innerWidth;let y=new Set([...u.keys()]),m=!0;function w(e,t,l,n){let o=function e(t,l,n,a,o=null,d,c=!1){let s=t.filter(e=>r(e)==l).map(e=>null!=o?c?{name:e,value:0,category:"middle",children:[{name:`${e} (retained)`,value:a.get(e)-o.get(e),category:"retained",children:[{name:"shallow size",value:o.get(e),category:"shallow",children:[]}]}]}:{name:e,value:a.get(e)-o.get(e),category:"retained",children:[{name:e,value:o.get(e),category:"shallow",children:[]}]}:{name:e,value:a.get(e),category:d,children:[]}),p=t.filter(e=>r(e)!=l),u=new Set(p.map(e=>i(e)[l]));return u.forEach(t=>{let n=e(p.filter(e=>i(e)[l]==t),l+1,t,a,o,d,c);s.push(n)}),{name:n,category:"middle",children:s,value:0}}([...y],0,"Kotlin IR",e,t,l,n),d=a.hierarchy(o).sum(e=>e.value);return d.children.sort((e,t)=>t.value-e.value),d}const v=a.select("body").append("svg").attr("width",f).attr("height",h).append("g"),x=a.select("svg").append("defs"),b=new Map([...d.keys()].map(e=>{let t=d[((e-1)%d.length+d.length)%d.length],l=t.replace("#","");return x.append("pattern").attr("id",t.replace("#","")).attr("patternUnits","userSpaceOnUse").attr("width",4.5).attr("height",4.5).attr("patternTransform","rotate(45)").style("background",t).append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",4.5).attr("stroke",`#${(16777215^Number(`0x1${l}`)).toString(16).substr(1).toUpperCase()}`).attr("stroke-width",3),[d[e],l]})),A=a.treemap().size([f,h]).paddingInner(3),B=function(e,t){return function(){let l=document.getElementById("viewMode").value;if(!("retained"===l||"shallow"===l||"middle"==l))return;let n=null;m=!0,"retained"===l?n=w(u,null,"retained",e):"shallow"===l?(n=w(g,null,"shallow",e),m=!1):n=w(u,g,"retained",e),t(n)}}(!1,e=>{v.selectAll("rect").remove(),v.selectAll("text").remove(),function(e){console.log(e);let t=A(e),l=e=>d[e.depth];v.selectAll("rect").data(t.descendants()).enter().append("rect").attr("x",e=>e.x0).attr("y",e=>e.y0).attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("fill",e=>{let t=e.data,n=l(e);return"retained"!=t.category&&"middle"!=t.category&&m?`url(#${b.get(n)})`:n}).on("mousemove",function(e,t){n.style("left",e.x+10+"px"),n.style("top",e.y-20+"px"),n.style("display","inline-block");let l=t.data,a=t.value,r="";"shallow"==l.category?(a=g.get(l.name),r=" (Shallow size)"):"retained"==l.category&&(a=u.get(l.name),r=" (Retained size)");let i=`${l.name}${r}`;n.html(`${o(i)}: ${a}`)}).on("mouseout",function(e,t){n.style("display","none")}).style("stroke","black").style("z-index",e=>e.depth),v.selectAll("text").data(t.descendants().filter(e=>1==e.depth)).enter().filter(e=>e.x1-e.x0>10&&e.y1-e.y0>10).append("text").attr("x",e=>e.x0).attr("y",e=>e.y0+21).text(e=>e.data.name).attr("font-size","19px").attr("fill",e=>"#ffffff");let n=a.select("body").append("div").attr("class","toolTip")}(e)});B(),(0,c.buildTreeView)(u,!0,function(e,t){e.forEach(e=>{t?(y.add(e),console.log(`${e} added`)):(y.delete(e),console.log(`${e} deleted`))}),B()});const k=document.getElementById("viewMode");k.oninput=B;