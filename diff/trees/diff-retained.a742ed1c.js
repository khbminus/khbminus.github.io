var e,t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequire94c2;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequire94c2=a);var i=a("ld1g2"),d=a("gJtvX");!function(e){e[e.Mixed=0]="Mixed",e[e.NotChanged=1]="NotChanged",e[e.Added=2]="Added",e[e.Removed=3]="Removed"}(e||(e={}));class o{constructor(e,t,r,n){this.x=null,this.y=null,this.children=[],this._children=null,this.node=null,this.toString=()=>`Node(${this.name})`,this.collapsed=e,this.name=t,this.size=r,this.type=n}}function l(){return new Map(Object.entries(d.retainedDiffDeclarationsSizes).map(([t,r])=>{let n=function(t){if("Mixed"==t)return e.Mixed;if("Added"==t)return e.Added;if("Removed"==t)return e.Removed;if("NotChanged"==t)return e.NotChanged;throw Error(`Unknown tree type ${t}`)}(r.type);return[t,new o(n!=e.Mixed,t,r.size,n)]}))}const s=l(),c=l();function h(e){return Object.entries(d.retainedDiffTreeParents).filter(([e,t])=>e!==t).map(([t,r])=>({source:e.get(r),target:e.get(t)}))}h(s).forEach(t=>{t.target.type!=e.NotChanged&&t.source.children.push(t.target)}),h(c).forEach(e=>e.source.children.push(e.target));const u=i.hierarchy(s.get("Fake source")),f=i.hierarchy(c.get("Fake source"));[u,f].forEach(e=>e.descendants().forEach((e,t)=>{e.data._children=e.children,e.data.node=e,e.id=t,e.data.children.length>4&&(e.children=null)}));var i=a("ld1g2"),p=a("16ejo"),d=a("gJtvX");(0,p.buildTreeView)(new Map(Object.entries(d.retainedDiffDeclarationsSizes).map(([e,t])=>[e,t.size])),!1,function(e,t){if(k.clear(),t?e.forEach(e=>C.add(e)):e.forEach(e=>C.delete(e)),C.forEach(e=>{if(k.has(e)||(k.has(e)||function e(t){0!=t.size&&(k.add(t.name),t.children.forEach(e))}(x.get(e)),!k.has(e)))return;let t=x.get(e).node;for(t.children=x.get(e)._children;t!==m;)null==t.parent.children?t.parent.children=[t]:t.parent.children.includes(t)||t.parent.children.push(t),t=t.parent}),A(null,m),!t)return;let r=x.get(e[e.length-1]).node;v.transition().duration(750).call(N.translateTo,r.y,r.x)});const g=window.innerWidth;let m=null,x=null,y=[[u,s],[f,c]];const w=i.tree().nodeSize([25,180]),k=new Set,v=i.select("body").append("svg").attr("viewBox",[-70,-10,g,25]).attr("width",g).attr("height",window.innerHeight).attr("style","max-width: 100%; height: auto; font: 8px sans-serif"),b=v.append("g"),z=b.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5),E=b.append("g").attr("stroke-linejoin","round").attr("stroke-width",3),N=i.zoom().on("zoom",function({transform:e}){b.attr("transform",e)});v.call(N);const M=i.linkHorizontal().x(e=>e.y).y(e=>e.x);let R=0;function A(t,r){let n=m.descendants().reverse(),a=m.links();w(m);let i=m,d=m;m.eachBefore(e=>{e.x<i.x&&(i=e),e.x>d.x&&(d=e)}),R=d.x-i.x+10;let o=v.transition().duration(250).attr("viewBox",[-70,i.x-5,g,R]).tween("resize",window.ResizeObserver?null:()=>()=>v.dispatch("toggle")),l=E.selectAll("g").data(n,e=>e.id),s=l.enter().append("g").attr("fill-opacity",0).attr("stroke-opacity",0).on("click",(e,t)=>{t.children=t.children?null:t.data._children,A(e,t)});s.append("circle").attr("fill",t=>{let r=t.data.type;switch(r){case e.Added:return"#57ab5a";case e.Removed:return"#e5534b";case e.Mixed:return"#36728d";case e.NotChanged:return"#777"}}).attr("r",5),s.append("text").attr("dy","0.31em").attr("x",e=>e.data.children.length>0?-6:6).attr("text-anchor",e=>e.data.children.length>0?"end":"start").text(e=>e.data.name).clone(!0).lower().attr("stroke-linejoin","round").attr("stroke-width",3).attr("stroke","white"),s.append("title").text(t=>{let r="mixed";switch(t.data.type){case e.NotChanged:r="Not changed";break;case e.Mixed:r="Mixed";break;case e.Removed:r="Removed";break;case e.Added:r="Added"}return`${t.data.name}
${r}
Î”: ${t.data.size}`}),l.merge(s).attr("opacity",e=>k.has(e.data.name)||0==k.size?1:.4),l.merge(s).transition(o).attr("transform",e=>`translate(${e.y},${e.x})`).attr("fill-opacity",1).attr("stroke-opacity",1),l.exit().transition(o).remove().attr("transform",e=>`translate(${r.y},${r.x})`).attr("fill-opacity",0).attr("stroke-opacity",0);let c=z.selectAll("path").data(a,e=>e.target.id),h=c.enter().append("path").attr("d",e=>{let t={x:r.x0,y:r.y0};return M({source:t,target:t})}).attr("stroke",e=>{let t=e.target.data.size;return 0==t?"#545454":t<0?"#941919":"#1b7a3b"});c.merge(h).attr("opacity",e=>k.has(e.source.data.name)&&k.has(e.target.data.name)||0==k.size?.6:.1),c.merge(h).transition(o).attr("d",M),c.exit().transition(o).remove().attr("d",e=>{let t={x:r.x,y:r.y};return M({source:t,target:t})}),m.eachBefore(e=>{e.x0=e.x,e.y0=e.y})}function $(){let e=document.getElementById("show-not-changed");[m,x]=y[Number(e.checked)],console.log([...x.keys()]),(0,p.updateKeys)([...x.entries()].filter(([e,t])=>null!==t._children).map(([e,t])=>e)),m.x0=90,m.y0=0,m.sort((e,t)=>i.ascending(e.data.name,t.data.name)),m.descendants().forEach((e,t)=>{e.data.children.length>4&&(e.children=null)}),A(null,m)}document.getElementById("show-not-changed").onclick=$,$(),document.getElementById("reset-button").onclick=function(){v.transition().duration(750).call(N.transform,i.zoomIdentity,i.zoomTransform(v.node()).invert([0,0]))};let C=new Set;