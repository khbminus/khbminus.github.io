var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequire94c2;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){a[e]=t},e.parcelRequire94c2=n);var r=(n("ld1g2"),n("ld1g2"));console.log(r);var l=n("16ejo"),i=n("gJtvX"),o=n("bOTk3"),s=n("b8ciI");function d(e){let t={")":"(","]":"[",">":"<","}":"{"},a=[...e],n=[],r=[],l="";return a.forEach(e=>{if("."===e){0===n.length?(r.push(l),l=""):l=l.concat(".");return}if("("===e||"{"===e||"<"==e||"["==e)n.push(e);else if(")"===e||"}"===e||">"===e||"]"===e){for(;n.length>1&&n[n.length-1]!=t[e];)n.pop();n.pop()}l=l.concat(e)}),l.length>0&&r.push(l),r}var r=n("ld1g2");const c=new Map(Object.entries(o.kotlinRetainedSize).map(e=>[e[0],e[1].size]));Object.entries(s.kotlinDeclarationsSize).map(e=>[e[0],e[1].size]);const p=.97*window.innerHeight,u=.8*window.innerWidth;[...c.keys()];let g=0;function f(e){return d(e).length-1}let h=[i.irMap1,i.irMap2];const m=e=>e.ancestors().reverse().map(e=>e.data.name).join("/"),y=r.format(",d");let v=r.scaleLinear().rangeRound([0,u]),w=r.scaleLinear().rangeRound([0,p]);const x=r.select("body").append("svg").attr("width",u).attr("height",p).append("g").style("font","10px sans-serif").attr("viewBox",[.5,-30.5,u,p+30]).attr("transform","translate(0, 30)"),C=r.select("svg").append("defs");C.append("pattern").attr("id","minus").attr("patternUnits","userSpaceOnUse").attr("width",4.5).attr("height",4.5).attr("patternTransform","rotate(90)").style("background","#ccc").append("line").attr("x1",0).attr("y1",.5).attr("x2",0).attr("y2",4).attr("stroke","#ED1B24").attr("stroke-width",2),C.append("pattern").attr("id","plus").attr("patternUnits","userSpaceOnUse").attr("width",20).attr("height",20).attr("patternTransform","scale(0.5) rotate(90)").style("background","#ccc").append("path").attr("d","M3.25 10h13.5M10 3.25v13.5").attr("stroke-linecap","square").attr("stroke-width",.5).attr("stroke","hsl(121,100%,50%)");const k=r.treemap().tile(function(e,t,a,n,l){for(let i of(r.treemapBinary(e,0,0,u,p),e.children))i.x0=t+i.x0/u*(n-t),i.x1=t+i.x1/u*(n-t),i.y0=a+i.y0/p*(l-a),i.y1=a+i.y1/p*(l-a)});let M=null;const $=document.getElementById("viewMode");$.oninput=O;const b=document.getElementById("sizeMode");b.oninput=function(){h="shallow"===b.value?[i.irMap1,i.irMap2]:[i.retainedIrMap1,i.retainedIrMap2],O()};let U=new Set([...(0,i.irMap1).keys(),...(0,i.irMap2).keys()]);function E(e,t){let a=e.selectAll("g").data(t.children.concat(t)).join("g");a.filter(e=>e===t?e.parent:e.children).attr("cursor","pointer").on("click",(e,a)=>a===t?function(e){let t=M.attr("pointer-events","none"),a=M=x.insert("g","*").call(E,e.parent);v.domain([e.parent.x0,e.parent.x1]),w.domain([e.parent.y0,e.parent.y1]),x.transition().duration(750).call(a=>t.transition(a).remove().attrTween("opacity",()=>r.interpolate(1,0)).call(T,e)).call(t=>a.transition(t).call(T,e.parent))}(t):function(e){let t=M.attr("pointer-events","none"),a=M=x.append("g").call(E,e);v.domain([e.x0,e.x1]),w.domain([e.y0,e.y1]),x.transition().duration(750).call(a=>t.transition(a).remove().call(T,e.parent)).call(t=>a.transition(t).attrTween("opacity",()=>r.interpolate(0,1)).call(T,e))}(a)),a.append("title").text(e=>{let t=`${m(e)}
${y(e.value)}`;return e.data.plusChange>0&&(t+=`
++:${y(e.data.plusChange)}`),e.data.minusChange>0&&(t+=`
--:${y(e.data.minusChange)}`),t}),a.append("rect").attr("id",e=>e.leafUid=`leaf${g++}`).attr("fill",e=>e===t?"#fff":"diff-pos"===e.data.category?"url(#plus)":"regular"===e.data.category?"#347EB4":"diff-neg"===e.data.category?"url(#minus)":"#ccc").attr("stroke",e=>"diff-pos"===e.data.category||"diff-neg"===e.data.category?"#000":"#fff"),a.append("clipPath").attr("id",e=>e.clipUid=`clip${g++}`).append("use").attr("xlink:href",e=>`#${e.leafUid}`),a.append("text").attr("clip-path",e=>`url(#${e.clipUid})`).attr("font-weight",e=>e===t?"bold":null).selectAll("tspan").data(e=>{if(e===t)return[m(e)];let a=[e.data.name].concat(y(e.value));return e.data.plusChange>0&&"diff-pos"!=e.data.category&&(a=a.concat(`++: ${y(e.data.plusChange)}`)),e.data.minusChange>0&&"diff-neg"!=e.data.category&&(a=a.concat(`--: ${y(e.data.minusChange)}`)),a}).join("tspan").attr("x",3).attr("y",(e,t,a)=>`${(t===a.length-1)*.3+1.1+.9*t}em`).attr("fill-opacity",(e,t,a)=>t===a.length-1?.7:null).attr("font-weight",(e,t,a)=>t===a.length-1?"normal":null).style("fill",e=>(console.log(e),e.startsWith("--"))?"#8a1116":e.startsWith("++")?"hsl(120,97%,30%)":null).text(e=>e),e.call(T,t)}function T(e,t){e.selectAll("g").attr("transform",e=>e===t?"translate(0,-30)":`translate(${v(e.x0)},${w(e.y0)})`).select("rect").attr("width",e=>e===t?u:v(e.x1)-v(e.x0)).attr("height",e=>e===t?30:w(e.y1)-w(e.y0))}function O(){var e;let t=!1,[a,n]=h;"common"===$.value?(U=new Set([...a.keys(),...n.keys()]),t=!0):U=new Set("diff-pos"===$.value?[...n.keys()].filter(e=>{let t=a.has(e)?a.get(e):0;return n.get(e)>t}):[...a.keys()].filter(e=>{let t=n.has(e)?n.get(e):0;return a.get(e)>t})),x.selectAll("g").remove(),v=r.scaleLinear().rangeRound([0,u]),w=r.scaleLinear().rangeRound([0,p]),(0,l.updateKeys)([...U]),M=x.append("g").call(E,k((e=t,r.hierarchy(function e(t,a,n,r,l,i){let o=t.filter(e=>f(e)==a).map(e=>{let t=r.has(e)?r.get(e):0,a=l.has(e)?l.get(e):0,n=i?[{name:e,value:a-t,plusChange:a>t?a-t:0,minusChange:a<t?t-a:0,category:a>t?"diff-pos":"diff-neg",children:[]},{name:e,value:Math.max(t,a)-Math.abs(t-a),plusChange:0,minusChange:0,category:"regular",children:[]}]:[{name:e,value:a-t,plusChange:a>t?a-t:0,minusChange:a<t?t-a:0,category:a>t?"diff-pos":"diff-neg",children:[]}];return{name:e,value:0,category:"middle",plusChange:n.map(e=>e.plusChange).reduce((e,t)=>e+t),minusChange:n.map(e=>e.minusChange).reduce((e,t)=>e+t),children:n}}),s=t.filter(e=>f(e)!=a),c=new Set(s.map(e=>d(e)[a]));return c.forEach(t=>{let n=e(s.filter(e=>d(e)[a]==t),a+1,t,r,l,i);o.push(n)}),{name:n,category:"middle",children:o,plusChange:o.map(e=>e.plusChange).reduce((e,t)=>e+t),minusChange:o.map(e=>e.minusChange).reduce((e,t)=>e+t),value:0}}([...U],0,"Kotlin IR",a,n,e)).sum(e=>e.value).sort((e,t)=>t.value-e.value))))}(0,l.buildTreeView)(new Map([...U].map(e=>[e,0])),!0,(e,t)=>{e.forEach(e=>{t?(U.add(e),console.log(`${e} added`)):(U.delete(e),console.log(`${e} deleted`))}),O()}),O();